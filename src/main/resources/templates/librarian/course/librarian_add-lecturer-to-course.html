<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Details Subject</title>
    <link rel="stylesheet" th:href="@{/css/base.css}"/>
    <link rel="stylesheet" th:href="@{/css/fragment.css}"/>
    <link
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap"
            rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"/>
</head>

<body>

<header class="row" th:replace="~{fragments/header::headerLibrarianSection}"></header>
<div class="main_content">
    <div class="grid app__container-content-wrapper">
        <div class="app__container-content">
            <div class="course-details-head">
                <a th:href="@{/librarian}">Home</a>
                <span> &gt; <a th:href="@{'/librarian/courses/detail' + ${course.courseId}}" th:text="${course.courseCode}">Courses management</a></span>
                <span> &gt; Add new lecturer</span>
            </div>
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h2">Add lecturer</h1>

            </div>
            <div class="lib_content">
                <div class="lib_form">
                    <div th:if="${param.success}">
                        <div class="alert alert-info">Save course successful !!!</div>
                    </div>
                    <div th:if="${param.error}">
                        <div class="alert alert-danger">Please check course information again !!!</div>
                    </div>
                    <div class="lib_form-content">
                        <form method="post" role="form" th:action="@{'/librarian/updateLecturers/' + ${course.courseId}}"
                              th:id="add-form">
<!--                            <label for="lecturer">Enter a lecturer</label>-->
<!--                            <input type="text" id="lecturer" th:id="search">-->
                            <div class="col-md-12 search_list">
                                <label for="selectLecturer">Select an option:</label>
                                <select id="selectLecturer" th:onchange="changeBrand()">
                                    <!-- Default options -->
<!--                                    <option th:if="accounts ne null" th:each="account: ${accounts}"-->
<!--                                            th:value="${account.accountId}"-->
<!--                                            th:text="|${account.accountId} - ${account.name}|"-->
<!--                                    ></option>-->

                                    <option th:selected="true" th:disabled="true"
                                            th:text="'Please Select A Lecturer'"></option>
                                    <option th:if="accounts ne null" th:each="account: ${accounts}"
                                            th:value="${account.accountId}"
                                            th:text="|${account.accountId} - ${account.name}|">
                                    </option>
                                </select>
                            </div>
                        </form>
                    </div>
                    <div>
                        <h3>Course's Lecturers</h3>
                        <p  th:if="${lecturers ne null}" th:each="lecturer : ${lecturers}">
                            <a th:text="${lecturer.accountId}"
                            th:href="@{'/user/profile/'+ ${lecturer.accountId}}"></a>
                            |<a href="">Remove from course</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div class="row" th:replace="~{fragments/footer :: footerSection}"></div>



<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script
        src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

<script>
    const inputText = document.getElementById('inputText');
    const selectOptions = document.getElementById('selectOptions');

    // Event listener for input changes
    inputText.addEventListener('input', () => {
            var search = $("#search").val();
            $.ajax({
                type: 'get',
                url: '/lecturer/search/' + search,
                success: function (data) {
                    // Resetting select option
                    var select = document.getElementById("model");
                    select.options.length = 0;

                    options = data.options;
                    for (var i = 0; i < data.length; i++) {
                        select.options[select.options.length] = new Option(data[i], i);
                    }
                    for (var i = 0; i < select.childElementCount; i++) {
                        console.log(select.options[i]);
                    }

                }, error: function (error) {
                    console.log(error);
                }
            })

    });
</script>
</body>
</html>